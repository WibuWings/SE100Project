{"ast":null,"code":"'use strict';\n\nmodule.exports = exports = clean;\nexports.usage = 'Removes the entire folder containing the compiled .node module';\n\nconst rm = require('rimraf');\n\nconst exists = require('fs').exists || require('path').exists;\n\nconst versioning = require('./util/versioning.js');\n\nconst napi = require('./util/napi.js');\n\nconst path = require('path');\n\nfunction clean(gyp, argv, callback) {\n  const package_json = gyp.package_json;\n  const napi_build_version = napi.get_napi_build_version_from_command_args(argv);\n  const opts = versioning.evaluate(package_json, gyp.opts, napi_build_version);\n  const to_delete = opts.module_path;\n\n  if (!to_delete) {\n    return callback(new Error('module_path is empty, refusing to delete'));\n  } else if (path.normalize(to_delete) === path.normalize(process.cwd())) {\n    return callback(new Error('module_path is not set, refusing to delete'));\n  } else {\n    exists(to_delete, found => {\n      if (found) {\n        if (!gyp.opts.silent_clean) console.log('[' + package_json.name + '] Removing \"%s\"', to_delete);\n        return rm(to_delete, callback);\n      }\n\n      return callback();\n    });\n  }\n}","map":{"version":3,"sources":["D:/UIT/Nam3_HKI/OOP/SE100Project/client/node_modules/@mapbox/node-pre-gyp/lib/clean.js"],"names":["module","exports","clean","usage","rm","require","exists","versioning","napi","path","gyp","argv","callback","package_json","napi_build_version","get_napi_build_version_from_command_args","opts","evaluate","to_delete","module_path","Error","normalize","process","cwd","found","silent_clean","console","log","name"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,OAAP,GAAiBA,OAAO,GAAGC,KAA3B;AAEAD,OAAO,CAACE,KAAR,GAAgB,gEAAhB;;AAEA,MAAMC,EAAE,GAAGC,OAAO,CAAC,QAAD,CAAlB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,IAAD,CAAP,CAAcC,MAAd,IAAwBD,OAAO,CAAC,MAAD,CAAP,CAAgBC,MAAvD;;AACA,MAAMC,UAAU,GAAGF,OAAO,CAAC,sBAAD,CAA1B;;AACA,MAAMG,IAAI,GAAGH,OAAO,CAAC,gBAAD,CAApB;;AACA,MAAMI,IAAI,GAAGJ,OAAO,CAAC,MAAD,CAApB;;AAEA,SAASH,KAAT,CAAeQ,GAAf,EAAoBC,IAApB,EAA0BC,QAA1B,EAAoC;AAClC,QAAMC,YAAY,GAAGH,GAAG,CAACG,YAAzB;AACA,QAAMC,kBAAkB,GAAGN,IAAI,CAACO,wCAAL,CAA8CJ,IAA9C,CAA3B;AACA,QAAMK,IAAI,GAAGT,UAAU,CAACU,QAAX,CAAoBJ,YAApB,EAAkCH,GAAG,CAACM,IAAtC,EAA4CF,kBAA5C,CAAb;AACA,QAAMI,SAAS,GAAGF,IAAI,CAACG,WAAvB;;AACA,MAAI,CAACD,SAAL,EAAgB;AACd,WAAON,QAAQ,CAAC,IAAIQ,KAAJ,CAAU,0CAAV,CAAD,CAAf;AACD,GAFD,MAEO,IAAIX,IAAI,CAACY,SAAL,CAAeH,SAAf,MAA8BT,IAAI,CAACY,SAAL,CAAeC,OAAO,CAACC,GAAR,EAAf,CAAlC,EAAiE;AACtE,WAAOX,QAAQ,CAAC,IAAIQ,KAAJ,CAAU,4CAAV,CAAD,CAAf;AACD,GAFM,MAEA;AACLd,IAAAA,MAAM,CAACY,SAAD,EAAaM,KAAD,IAAW;AAC3B,UAAIA,KAAJ,EAAW;AACT,YAAI,CAACd,GAAG,CAACM,IAAJ,CAASS,YAAd,EAA4BC,OAAO,CAACC,GAAR,CAAY,MAAMd,YAAY,CAACe,IAAnB,GAA0B,iBAAtC,EAAyDV,SAAzD;AAC5B,eAAOd,EAAE,CAACc,SAAD,EAAYN,QAAZ,CAAT;AACD;;AACD,aAAOA,QAAQ,EAAf;AACD,KANK,CAAN;AAOD;AACF","sourcesContent":["'use strict';\n\nmodule.exports = exports = clean;\n\nexports.usage = 'Removes the entire folder containing the compiled .node module';\n\nconst rm = require('rimraf');\nconst exists = require('fs').exists || require('path').exists;\nconst versioning = require('./util/versioning.js');\nconst napi = require('./util/napi.js');\nconst path = require('path');\n\nfunction clean(gyp, argv, callback) {\n  const package_json = gyp.package_json;\n  const napi_build_version = napi.get_napi_build_version_from_command_args(argv);\n  const opts = versioning.evaluate(package_json, gyp.opts, napi_build_version);\n  const to_delete = opts.module_path;\n  if (!to_delete) {\n    return callback(new Error('module_path is empty, refusing to delete'));\n  } else if (path.normalize(to_delete) === path.normalize(process.cwd())) {\n    return callback(new Error('module_path is not set, refusing to delete'));\n  } else {\n    exists(to_delete, (found) => {\n      if (found) {\n        if (!gyp.opts.silent_clean) console.log('[' + package_json.name + '] Removing \"%s\"', to_delete);\n        return rm(to_delete, callback);\n      }\n      return callback();\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"script"}