{"ast":null,"code":"'use strict';\n\nmodule.exports = exports;\n\nconst fs = require('fs');\n\nconst path = require('path');\n\nconst win = process.platform === 'win32';\nconst existsSync = fs.existsSync || path.existsSync;\n\nconst cp = require('child_process'); // try to build up the complete path to node-gyp\n\n/* priority:\n  - node-gyp on ENV:npm_config_node_gyp (https://github.com/npm/npm/pull/4887)\n  - node-gyp on NODE_PATH\n  - node-gyp inside npm on NODE_PATH (ignore on iojs)\n  - node-gyp inside npm beside node exe\n*/\n\n\nfunction which_node_gyp() {\n  let node_gyp_bin;\n\n  if (process.env.npm_config_node_gyp) {\n    try {\n      node_gyp_bin = process.env.npm_config_node_gyp;\n\n      if (existsSync(node_gyp_bin)) {\n        return node_gyp_bin;\n      }\n    } catch (err) {// do nothing\n    }\n  }\n\n  try {\n    const node_gyp_main = require.resolve('node-gyp'); // eslint-disable-line node/no-missing-require\n\n\n    node_gyp_bin = path.join(path.dirname(path.dirname(node_gyp_main)), 'bin/node-gyp.js');\n\n    if (existsSync(node_gyp_bin)) {\n      return node_gyp_bin;\n    }\n  } catch (err) {// do nothing\n  }\n\n  if (process.execPath.indexOf('iojs') === -1) {\n    try {\n      const npm_main = require.resolve('npm'); // eslint-disable-line node/no-missing-require\n\n\n      node_gyp_bin = path.join(path.dirname(path.dirname(npm_main)), 'node_modules/node-gyp/bin/node-gyp.js');\n\n      if (existsSync(node_gyp_bin)) {\n        return node_gyp_bin;\n      }\n    } catch (err) {// do nothing\n    }\n  }\n\n  const npm_base = path.join(path.dirname(path.dirname(process.execPath)), 'lib/node_modules/npm/');\n  node_gyp_bin = path.join(npm_base, 'node_modules/node-gyp/bin/node-gyp.js');\n\n  if (existsSync(node_gyp_bin)) {\n    return node_gyp_bin;\n  }\n}\n\nmodule.exports.run_gyp = function (args, opts, callback) {\n  let shell_cmd = '';\n  const cmd_args = [];\n\n  if (opts.runtime && opts.runtime === 'node-webkit') {\n    shell_cmd = 'nw-gyp';\n    if (win) shell_cmd += '.cmd';\n  } else {\n    const node_gyp_path = which_node_gyp();\n\n    if (node_gyp_path) {\n      shell_cmd = process.execPath;\n      cmd_args.push(node_gyp_path);\n    } else {\n      shell_cmd = 'node-gyp';\n      if (win) shell_cmd += '.cmd';\n    }\n  }\n\n  const final_args = cmd_args.concat(args);\n  const cmd = cp.spawn(shell_cmd, final_args, {\n    cwd: undefined,\n    env: process.env,\n    stdio: [0, 1, 2]\n  });\n  cmd.on('error', err => {\n    if (err) {\n      return callback(new Error(\"Failed to execute '\" + shell_cmd + ' ' + final_args.join(' ') + \"' (\" + err + ')'));\n    }\n\n    callback(null, opts);\n  });\n  cmd.on('close', code => {\n    if (code && code !== 0) {\n      return callback(new Error(\"Failed to execute '\" + shell_cmd + ' ' + final_args.join(' ') + \"' (\" + code + ')'));\n    }\n\n    callback(null, opts);\n  });\n};","map":{"version":3,"sources":["D:/UIT/Nam3_HKI/OOP/SE100Project/client/node_modules/@mapbox/node-pre-gyp/lib/util/compile.js"],"names":["module","exports","fs","require","path","win","process","platform","existsSync","cp","which_node_gyp","node_gyp_bin","env","npm_config_node_gyp","err","node_gyp_main","resolve","join","dirname","execPath","indexOf","npm_main","npm_base","run_gyp","args","opts","callback","shell_cmd","cmd_args","runtime","node_gyp_path","push","final_args","concat","cmd","spawn","cwd","undefined","stdio","on","Error","code"],"mappings":"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","sourcesContent":["'use strict';\n\nmodule.exports = exports;\n\nconst fs = require('fs');\nconst path = require('path');\nconst win = process.platform === 'win32';\nconst existsSync = fs.existsSync || path.existsSync;\nconst cp = require('child_process');\n\n// try to build up the complete path to node-gyp\n/* priority:\n  - node-gyp on ENV:npm_config_node_gyp (https://github.com/npm/npm/pull/4887)\n  - node-gyp on NODE_PATH\n  - node-gyp inside npm on NODE_PATH (ignore on iojs)\n  - node-gyp inside npm beside node exe\n*/\nfunction which_node_gyp() {\n  let node_gyp_bin;\n  if (process.env.npm_config_node_gyp) {\n    try {\n      node_gyp_bin = process.env.npm_config_node_gyp;\n      if (existsSync(node_gyp_bin)) {\n        return node_gyp_bin;\n      }\n    } catch (err) {\n      // do nothing\n    }\n  }\n  try {\n    const node_gyp_main = require.resolve('node-gyp'); // eslint-disable-line node/no-missing-require\n    node_gyp_bin = path.join(path.dirname(\n      path.dirname(node_gyp_main)),\n    'bin/node-gyp.js');\n    if (existsSync(node_gyp_bin)) {\n      return node_gyp_bin;\n    }\n  } catch (err) {\n    // do nothing\n  }\n  if (process.execPath.indexOf('iojs') === -1) {\n    try {\n      const npm_main = require.resolve('npm'); // eslint-disable-line node/no-missing-require\n      node_gyp_bin = path.join(path.dirname(\n        path.dirname(npm_main)),\n      'node_modules/node-gyp/bin/node-gyp.js');\n      if (existsSync(node_gyp_bin)) {\n        return node_gyp_bin;\n      }\n    } catch (err) {\n      // do nothing\n    }\n  }\n  const npm_base = path.join(path.dirname(\n    path.dirname(process.execPath)),\n  'lib/node_modules/npm/');\n  node_gyp_bin = path.join(npm_base, 'node_modules/node-gyp/bin/node-gyp.js');\n  if (existsSync(node_gyp_bin)) {\n    return node_gyp_bin;\n  }\n}\n\nmodule.exports.run_gyp = function(args, opts, callback) {\n  let shell_cmd = '';\n  const cmd_args = [];\n  if (opts.runtime && opts.runtime === 'node-webkit') {\n    shell_cmd = 'nw-gyp';\n    if (win) shell_cmd += '.cmd';\n  } else {\n    const node_gyp_path = which_node_gyp();\n    if (node_gyp_path) {\n      shell_cmd = process.execPath;\n      cmd_args.push(node_gyp_path);\n    } else {\n      shell_cmd = 'node-gyp';\n      if (win) shell_cmd += '.cmd';\n    }\n  }\n  const final_args = cmd_args.concat(args);\n  const cmd = cp.spawn(shell_cmd, final_args, { cwd: undefined, env: process.env, stdio: [0, 1, 2] });\n  cmd.on('error', (err) => {\n    if (err) {\n      return callback(new Error(\"Failed to execute '\" + shell_cmd + ' ' + final_args.join(' ') + \"' (\" + err + ')'));\n    }\n    callback(null, opts);\n  });\n  cmd.on('close', (code) => {\n    if (code && code !== 0) {\n      return callback(new Error(\"Failed to execute '\" + shell_cmd + ' ' + final_args.join(' ') + \"' (\" + code + ')'));\n    }\n    callback(null, opts);\n  });\n};\n"]},"metadata":{},"sourceType":"script"}